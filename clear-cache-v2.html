<!DOCTYPE html>
<html>

<head>
    <title>Clear App Cache</title>
</head>

<body>
    <h1>Clearing Cache...</h1>
    <div id="status">Starting...</div>
    <script>
        async function clearAll() {
            try {
                // 1. Unregister Service Workers
                const registrations = await navigator.serviceWorker.getRegistrations();
                for (let registration of registrations) {
                    await registration.unregister();
                }
                document.getElementById('status').innerHTML += '<br>‚úÖ Service Workers Unregistered';

                // 2. Clear Caches
                const cacheNames = await caches.keys();
                for (let name of cacheNames) {
                    await caches.delete(name);
                }
                document.getElementById('status').innerHTML += '<br>‚úÖ Caches Cleared';

                // 3. Clear LocalStorage
                localStorage.clear();
                document.getElementById('status').innerHTML += '<br>‚úÖ LocalStorage Cleared';

                document.getElementById('status').innerHTML += '<br>üöÄ Done! Redirecting to App in 2 seconds...';
                setTimeout(() => window.location.href = '/', 2000);
            } catch (e) {
                document.getElementById('status').innerHTML += '<br>‚ùå Error: ' + e.message;
            }
        }
        clearAll();
    </script>
</body>

</html>